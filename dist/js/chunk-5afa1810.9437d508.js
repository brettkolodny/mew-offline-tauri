(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5afa1810"],{5653:function(e,s,t){"use strict";(function(e){var i=t("5b66"),n=function(s){return Object(i["isHexString"])(s)?Object(i["toBuffer"])(s):e.from(s)};s["a"]=n}).call(this,t("1c35").Buffer)},"9dda":function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("mew-module",{staticClass:"d-flex flex-grow-1 pt-6",attrs:{title:e.title,"has-elevation":!0,"has-indicator":!0},scopedSlots:e._u([{key:"moduleBody",fn:function(){return[t("v-textarea",{staticClass:"VerifyInput",attrs:{outlined:"",label:"Signature",value:e.message},model:{value:e.message,callback:function(s){e.message=s},expression:"message"}}),e.signResult?t("div",{staticClass:"walletBg pa-3 VerifyMessage"},[e._v(" "+e._s(e.signer)+" "),e.didSign?t("span",{staticClass:"font-weight-medium"},[e._v(" did sign the message ")]):e._e(),e.didntSign?t("span",{staticClass:"font-weight-medium"},[e._v(" didn't sign the message ")]):e._e()]):e._e(),e.verificationError?t("div",{staticClass:"walletBg pa-3"},[e._v(" "+e._s(e.$t("signMessage.failed"))+" ")]):e._e(),t("div",{class:["text-right",e.signResult||e.verificationError?"pt-3":""]},[t("mew-button",{staticClass:"mr-4",attrs:{"btn-style":"light",title:"Clear all"},nativeOn:{click:function(s){return e.clearAll.apply(null,arguments)}}}),t("mew-button",{attrs:{disabled:!e.message,title:"Verify"},nativeOn:{click:function(s){return e.verifyMessage.apply(null,arguments)}}})],1)]},proxy:!0}])})},n=[],r=t("5b66"),a=t("dd34"),d={name:"ModuleMessageVerify",components:{},data:function(){return{title:"Verify Message",didSign:!1,didntSign:!1,signResult:!1,verificationError:!1,message:"",signer:""}},computed:{},mounted:function(){this.signAndVerify=new a["a"](this.web3,this.address)},methods:{verifyMessage:function(){try{this.verificationError=!1,this.signResult=!1,this.didSign=!1,this.didntSign=!1;var e=this.signAndVerify.verifyMessage(this.message),s=JSON.parse(this.message);if(!s.address)return void(this.verificationError=!0);e.verified&&Object(r["toChecksumAddress"])(s.address)===Object(r["toChecksumAddress"])("0x"+e.signer)?this.didSign=!0:this.didntSign=!0,this.signer=s.address,this.signResult=!0}catch(t){this.verificationError=!0}},clearAll:function(){this.verificationError=!1,this.didntSign=!1,this.didSign=!1,this.signResult=!1,this.message="",this.signer=""}}},c=d,o=t("2877"),l=Object(o["a"])(c,i,n,!1,null,"0fa72462",null);s["default"]=l.exports},b7ea:function(e,s,t){"use strict";s["a"]={SIGN_FAILED:"Failed to sign message",INVALID_LENGTH:"Invalid signature length",FAILED_TO_VERIFY:"Failed to verify signature"}},dd34:function(e,s,t){"use strict";(function(e){t.d(s,"a",(function(){return l}));var i=t("d4ec"),n=t("bee2"),r=(t("e9c4"),t("ac1f"),t("5319"),t("fb6a"),t("d3b7"),t("25f0"),t("5b66")),a=t("5653"),d=t("27ca"),c=t("2f62"),o=t("b7ea"),l=function(){function s(){Object(i["a"])(this,s),this.$store=d["a"],Object.assign(this,Object(c["d"])("wallet",["web3","address","isHardware","identifier"]))}return Object(n["a"])(s,[{key:"signMessage",value:function(e){var s=this;try{return this.web3().eth.sign(e,this.address()).then((function(e){return s.signature=JSON.stringify({address:s.address(),msg:s.message,sig:e,version:"3",signer:s.isHardware()?s.identifier():"MEW"},null,2),s.signature}))}catch(t){throw o["a"].SIGN_FAILED}}},{key:"verifyMessage",value:function(s){try{var t=JSON.parse(s),i=Object(r["hashPersonalMessage"])(Object(a["a"])(t.msg)),n=e.from(t.sig.replace("0x",""),"hex");if(65!==n.length)throw o["a"].INVALID_LENGTH;n[64]=0===n[64]||1===n[64]?n[64]+27:n[64],"1"===t.version&&(i=this.web3().utils.sha3(t.msg));var d=Object(r["ecrecover"])(i,n[64],n.slice(0,32),n.slice(32,64));return{verified:!t.address.replace("0x","").toLowerCase()!==Object(r["pubToAddress"])(d).toString("hex").toLowerCase(),signer:Object(r["pubToAddress"])(d).toString("hex").toLowerCase()}}catch(c){throw o["a"].FAILED_TO_VERIFY}}}]),s}()}).call(this,t("1c35").Buffer)}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-5afa1810.9437d508.js.map