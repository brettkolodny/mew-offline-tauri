{"version":3,"sources":["webpack:///./src/dapps/ens-manager-dapp/components/reverse/EnsReverseLookup.vue?9d4d","webpack:///src/dapps/ens-manager-dapp/components/reverse/EnsReverseLookup.vue","webpack:///./src/dapps/ens-manager-dapp/components/reverse/EnsReverseLookup.vue?3af7","webpack:///./src/dapps/ens-manager-dapp/components/reverse/EnsReverseLookup.vue","webpack:///./src/dapps/ens-manager-dapp/components/reverse/EnsReverseLookup.vue?e5ea"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","address","_v","_s","hasDomains","selectedDomain","domainListItems","on","setDomain","nativeOn","$event","setReverseRecord","reverseRecordNames","_e","staticRenderFns","name","props","default","type","durationPick","ensManager","data","ensLookupResults","selectedDomainAddr","permHandler","hasReverseRecordNames","computed","mapGetters","mapState","watch","network","mounted","methods","checkNetwork","setup","ens","provider","ensAddress","fetchDomains","findDomainByAddress","domains","value","Toast","chosenDomain","reverseRecord","err","getReverseRecordNames","reverse","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,YAAY,+DAA+D,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,QAAUP,EAAIQ,WAAWJ,EAAG,OAAO,CAACE,YAAY,2BAA2B,CAACN,EAAIS,GAAGT,EAAIU,GAAGV,EAAIQ,aAAa,GAAKR,EAAIW,WAAoUP,EAAG,MAAM,CAACE,YAAY,4CAA4C,CAACF,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACN,EAAIS,GAAG,mBAAmBL,EAAG,MAAM,CAACE,YAAY,gCAAgC,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,kBAAkB,GAAG,MAAQP,EAAIY,eAAe,qBAAqB,oBAAoB,MAAQZ,EAAIa,iBAAiBC,GAAG,CAAC,MAAQd,EAAIe,aAAaX,EAAG,aAAa,CAACE,YAAY,aAAaC,MAAM,CAAC,MAAQ,WAAW,WAAW,UAAUS,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOjB,EAAIkB,iBAAiBlB,EAAIY,qBAAqB,KAAr1BR,EAAG,MAAM,CAACA,EAAG,YAAY,CAACE,YAAY,wEAAwEC,MAAM,CAAC,kBAAkB,KAAK,CAACP,EAAIS,GAAG,iKAAiK,GAAsiBT,EAAyB,sBAAEI,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACN,EAAIS,GAAG,oBAAoBL,EAAG,MAAM,CAACE,YAAY,gCAAgC,CAACN,EAAIS,GAAG,IAAIT,EAAIU,GAAGV,EAAImB,oBAAoB,SAASnB,EAAIoB,MAAM,IACr5CC,EAAkB,G,2KCmEP,GACfC,wBACAC,OACAf,SACAgB,WACAC,aAEAH,MACAE,WACAC,aAEAC,cACAF,WACAC,aAEAE,YACAH,qBACAC,cAGAG,gBACA,OACAC,sBACAlB,cACAC,kBACAkB,sBACAC,eACAC,yBACAb,wBAGAc,uFACAC,yBACA,UACA,WACA,iBACA,kBAEAA,0CACAC,2CACAA,4DACAtB,2BACA,oCAGAuB,OACAC,mBACA,oCAGAC,mBAAA,wJACA,qGADA,IAGAC,SACAC,wBAAA,WACA,6BACA,0DAGAC,iBAAA,0KACA,+BACAC,qBACA,SACAC,oCACAC,yCAEA,KACA,yBACA,OACA,UACA,UACA,OACAF,EACA,gBAEA,oEAhBA,IAkBAG,wBAAA,oKACA,gIADA,IAGAC,+BAAA,0JAEA,OAFA,SAEA,yBACA,wBAAAC,SACA,2CACA,sCACA,OACAzB,YACA0B,iBACAxC,sBAEA,mDAEAyC,+BAAA,wDAbA,IAgBAlC,sBACA,sBACA,qDAEAG,6BAAA,qLAEA,mCACAgC,QACA,OACA,OAHAC,SAGA,6CACAA,GAAA,mCAEAC,uBACA,uFATA,IAuBAC,iCAAA,4JAKA,OALA,SAEAX,qBACA,4DACA,KACAY,uBAAA,SACAA,SAAA,mCACA,8EAEA,mFATA,MC/LuY,I,wBCQnYC,EAAY,eACd,EACAxD,EACAsB,GACA,EACA,KACA,WACA,MAIa,aAAAkC,E,2CCnBf,W","file":"js/chunk-c0b6e264.48e8aab0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-sheet',{staticClass:\"addressBlock d-flex justify-space-between align-center mb-7\"},[_c('mew-blockie',{attrs:{\"address\":_vm.address}}),_c('span',{staticClass:\"font-weight-heavy pr-15\"},[_vm._v(_vm._s(_vm.address))])],1),(!_vm.hasDomains)?_c('div',[_c('mew-alert',{staticClass:\"font-weight-light d-flex justify-space-between align-center mb-7 mt-7\",attrs:{\"hide-close-icon\":\"\"}},[_vm._v(\" No ENS names have their ETH Address records set to this address. Only ENS names that point to your Ethereum account can be set as your Primary ENS Name. \")])],1):_c('div',{staticClass:\"d-flex flex-column justify-space-between\"},[_c('div',{staticClass:\"mew-heading-2 mb-2\"},[_vm._v(\"Your Domains:\")]),_c('div',{staticClass:\"d-flex justify-space-between\"},[_c('mew-select',{attrs:{\"normal-dropdown\":\"\",\"value\":_vm.selectedDomain,\"filter-placeholder\":\"Search for Domain\",\"items\":_vm.domainListItems},on:{\"input\":_vm.setDomain}}),_c('mew-button',{staticClass:\"set-button\",attrs:{\"title\":\"Register\",\"btn-size\":\"xlarge\"},nativeOn:{\"click\":function($event){return _vm.setReverseRecord(_vm.selectedDomain)}}})],1)]),(_vm.hasReverseRecordNames)?_c('div',[_c('div',{staticClass:\"mew-heading-2 mb-2\"},[_vm._v(\"Reverse Names:\")]),_c('div',{staticClass:\"d-flex justify-space-between\"},[_vm._v(\" \"+_vm._s(_vm.reverseRecordNames)+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <v-sheet\n      class=\"addressBlock d-flex justify-space-between align-center mb-7\"\n    >\n      <mew-blockie :address=\"address\" />\n      <span class=\"font-weight-heavy pr-15\">{{ address }}</span>\n    </v-sheet>\n    <div v-if=\"!hasDomains\">\n      <mew-alert\n        hide-close-icon\n        class=\"font-weight-light d-flex justify-space-between align-center mb-7 mt-7\"\n      >\n        No ENS names have their ETH Address records set to this address. Only\n        ENS names that point to your Ethereum account can be set as your Primary\n        ENS Name.\n      </mew-alert>\n    </div>\n\n    <div v-else class=\"d-flex flex-column justify-space-between\">\n      <div class=\"mew-heading-2 mb-2\">Your Domains:</div>\n      <div class=\"d-flex justify-space-between\">\n        <mew-select\n          normal-dropdown\n          :value=\"selectedDomain\"\n          filter-placeholder=\"Search for Domain\"\n          :items=\"domainListItems\"\n          @input=\"setDomain\"\n        >\n        </mew-select>\n        <mew-button\n          title=\"Register\"\n          class=\"set-button\"\n          btn-size=\"xlarge\"\n          @click.native=\"setReverseRecord(selectedDomain)\"\n        />\n      </div>\n    </div>\n    <div v-if=\"hasReverseRecordNames\">\n      <div class=\"mew-heading-2 mb-2\">Reverse Names:</div>\n      <div class=\"d-flex justify-space-between\">\n        {{ reverseRecordNames }}\n        <!-- <mew-select\n          :value=\"selectedDomain\"\n          filter-placeholder=\"Search for Domain\"\n          :items=\"domainListItems\"\n          @input=\"setDomain\"\n        >\n        </mew-select> -->\n        <!-- <mew-button\n          title=\"Register\"\n          class=\"set-button\"\n          btn-size=\"xlarge\"\n          @click.native=\"setReverseRecord(selectedDomain)\"\n        /> -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { isEmpty } from 'lodash';\nimport ENS from '@ensdomains/ensjs';\nimport { mapGetters, mapState } from 'vuex';\nimport { Toast, ERROR } from '@/modules/toast/handler/handlerToast';\nimport PermanentNameModule from '../../handlers/handlerPermanentName';\nimport errorHandler from '@/modules/confirmation/handlers/errorHandler.js';\nimport metainfo from '../../metainfo.js';\nexport default {\n  name: 'EnsReverseLookup',\n  props: {\n    address: {\n      default: '',\n      type: String\n    },\n    name: {\n      default: '',\n      type: String\n    },\n    durationPick: {\n      default: '',\n      type: String\n    },\n    ensManager: {\n      default: () => {},\n      type: Object\n    }\n  },\n  data() {\n    return {\n      ensLookupResults: null,\n      hasDomains: false,\n      selectedDomain: {},\n      selectedDomainAddr: '',\n      permHandler: {},\n      hasReverseRecordNames: false,\n      reverseRecordNames: ''\n    };\n  },\n  computed: {\n    ...mapGetters('global', [\n      'network',\n      'gasPrice',\n      'gasPriceByType',\n      'getFiatValue'\n    ]),\n    ...mapGetters('external', ['fiatValue']),\n    ...mapState('global', ['gasPriceType']),\n    ...mapState('wallet', ['balance', 'web3', 'instance']),\n    domainListItems() {\n      return this.ensLookupResults || [];\n    }\n  },\n  watch: {\n    network() {\n      if (this.checkNetwork()) this.setup();\n    }\n  },\n  async mounted() {\n    if (this.checkNetwork()) await this.setup();\n  },\n  methods: {\n    checkNetwork() {\n      return metainfo.networks.find(\n        item => item.chainID === this.network.type.chainID\n      );\n    },\n    async setup() {\n      await this.findDomainByAddress();\n      const ens = this.network.type.ens\n        ? new ENS({\n            provider: this.web3.eth.currentProvider,\n            ensAddress: this.network.type.ens.registry\n          })\n        : null;\n      this.permHandler = new PermanentNameModule(\n        this.name,\n        this.address,\n        this.network,\n        this.web3,\n        ens,\n        this.durationPick\n      );\n      this.getReverseRecordNames();\n    },\n    async fetchDomains() {\n      return await this.ensManager.getAllNamesForAddress(this.address);\n    },\n    async findDomainByAddress() {\n      try {\n        this.hasDomains = true;\n        const domains = await this.fetchDomains();\n        if (isEmpty(domains)) this.hasDomains = false;\n        this.ensLookupResults = domains.map(item => {\n          return {\n            name: item.name,\n            value: item.nameHash,\n            address: item.address\n          };\n        });\n      } catch (e) {\n        Toast(e, {}, ERROR);\n      }\n    },\n    setDomain(value) {\n      this.selectedDomain = value;\n      this.getReverseRecordNames(this.selectedDomainAddr);\n    },\n    async setReverseRecord(chosenDomain) {\n      try {\n        const reverseRecord = await this.permHandler.setNameReverseRecord(\n          chosenDomain.name\n        );\n        this.hasReverseRecordNames = true;\n        return reverseRecord;\n      } catch (e) {\n        const err = errorHandler(e);\n        if (err) Toast(err, {}, ERROR);\n      }\n    },\n    // async getReverseRecordNames() {\n    //   try {\n    //     const reverseRecordNames = await this.permHandler.getReverseNameRecords(\n    //       this.permHandler.nameHash\n    //     );\n    //     this.reverseRecordNames = reverseRecordNames;\n    //     return reverseRecordNames;\n    //   } catch (e) {\n    //     Toast(e, {}, ERROR);\n    //   }\n    // },\n    async getReverseRecordNames() {\n      try {\n        const ens = this.network.type.ens\n          ? new ENS(this.web3.currentProvider, this.network.type.ens.registry)\n          : null;\n        const reverse = ens.reverse(this.address);\n        this.reverseRecordNames = await reverse.name();\n        this.hasReverseRecordNames = true;\n      } catch (e) {\n        this.hasReverseRecordNames = false;\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.set-button {\n  margin-left: 10px;\n}\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsReverseLookup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsReverseLookup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EnsReverseLookup.vue?vue&type=template&id=354d9472&scoped=true&\"\nimport script from \"./EnsReverseLookup.vue?vue&type=script&lang=js&\"\nexport * from \"./EnsReverseLookup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EnsReverseLookup.vue?vue&type=style&index=0&id=354d9472&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"354d9472\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EnsReverseLookup.vue?vue&type=style&index=0&id=354d9472&prod&lang=scss&scoped=true&\""],"sourceRoot":""}